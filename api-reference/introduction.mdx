---
title: "API Reference"
description: "Complete reference for WebRun REST API endpoints"
---

## Base URL

```
https://connect.webrun.ai
```

## Authentication

All endpoints require API key authentication via the Authorization header:

```
Authorization: Bearer YOUR_API_KEY
```

Get your API key at [webrun.ai/settings](https://webrun.ai/settings)

---

## Which Endpoint Should I Use?

**Single task with auto-termination:**
→ `POST /start/run-task`

**Multiple tasks in sequence:**
→ `POST /start/start-session` + `POST /start/send-message`

**Using LangChain, Vercel AI SDK, or OpenAI SDK:**
→ `POST /v1/chat/completions`

**Claude Desktop or MCP client:**
→ MCP Server integration

[Integration guides](/integrations/rest-api)

---

## Rate Limits

| Endpoint | Limit |
|----------|-------|
| `POST /start/start-session` | 10 requests/min per user |
| `POST /start/send-message` | 10 requests/min per user |
| `POST /start/run-task` | 10 requests/min per user |
| `GET /task/:sessionId/:taskId` | No limit |
| `GET /start/health` | No limit |

Rate limits apply per API key owner, not per key. When you hit the limit, requests fail with HTTP 429.

---

## Core Endpoints

### POST /start/run-task

Execute a single task with auto-termination. Simplest integration method.

**Request:**
```json
{
  "taskDetails": "Go to google.com and search for Anthropic",
  "maxDuration": 60000,
  "startingUrl": "https://google.com"
}
```

**Response (completed):**
```json
{
  "success": true,
  "sessionId": "a1b2c3",
  "taskId": "x9y8z7",
  "type": "task_completed",
  "data": {
    "message": "Successfully searched for Anthropic on Google"
  },
  "usage": {
    "prompt_tokens": 12450,
    "completion_tokens": 3200,
    "total_tokens": 15650,
    "completion_time": 23.5,
    "cost": 0.0124
  }
}
```

**Response (still running):**
```json
{
  "success": true,
  "sessionId": "a1b2c3",
  "taskId": "x9y8z7",
  "status": "pending",
  "pollUrl": "https://connect.webrun.ai/task/a1b2c3/x9y8z7"
}
```

[Complete endpoint documentation](/api-reference/endpoint/create)

---

### POST /start/start-session

Create a persistent session for multiple tasks.

**Request:**
```json
{
  "mode": "default",
  "initialTask": {
    "taskDetails": "Go to amazon.com",
    "startingPoint": "https://amazon.com",
    "maxDuration": 300000
  }
}
```

**Response:**
```json
{
  "success": true,
  "sessionId": "a1b2c3",
  "socketURL": "https://connect.webrun.ai",
  "streaming": {
    "webRTCURL": "https://74.235.190.31:8889/a1b2c3/whep",
    "webViewURL": "https://74.235.190.31:8889/a1b2c3"
  },
  "expiresIn": 300000,
  "balance": 12.50
}
```

[Complete endpoint documentation](/api-reference/endpoints#start-session)

---

### POST /start/send-message

Universal endpoint for all session control commands. Handles new tasks, state changes, manual interactions, and guardrail responses.

**New task:**
```json
{
  "sessionId": "a1b2c3",
  "message": {
    "actionType": "newTask",
    "newState": "start",
    "taskDetails": "Search for wireless keyboards",
    "terminateOnCompletion": true
  }
}
```

**State control:**
```json
{
  "sessionId": "a1b2c3",
  "message": {
    "actionType": "state",
    "newState": "pause | resume | stop | terminate"
  }
}
```

**Guardrail response:**
```json
{
  "sessionId": "a1b2c3",
  "message": {
    "actionType": "guardrail",
    "taskDetails": "Username: user@example.com, Password: pass123",
    "newState": "resume"
  }
}
```

**Manual interaction:**
```json
{
  "sessionId": "a1b2c3",
  "message": {
    "actionType": "interaction",
    "action": {
      "type": "CLICK | TYPE | KEY_PRESS | takeOverControl | releaseControl"
    }
  }
}
```

[Complete endpoint documentation](/api-reference/endpoint/create)

---

### GET /task/:sessionId/:taskId

Poll for task result. No rate limit.

**Response (still running):**
```json
{
  "success": true,
  "sessionId": "a1b2c3",
  "taskId": "x9y8z7",
  "status": "running",
  "usage": {
    "prompt_tokens": 8000,
    "completion_tokens": 1500,
    "total_tokens": 9500,
    "completion_time": 15.2,
    "cost": 0.0067
  }
}
```

**Response (completed):**
```json
{
  "success": true,
  "sessionId": "a1b2c3",
  "taskId": "x9y8z7",
  "type": "task_completed",
  "data": {
    "message": "Task finished successfully"
  },
  "usage": {
    "prompt_tokens": 12450,
    "completion_tokens": 3200,
    "total_tokens": 15650,
    "completion_time": 23.5,
    "cost": 0.0124
  },
  "completedAt": "2024-01-15T10:30:00Z"
}
```

**Response (guardrail):**
```json
{
  "success": true,
  "type": "guardrail_trigger",
  "data": {
    "type": "human_input_needed",
    "value": "I need login credentials to proceed"
  }
}
```

[Complete endpoint documentation](/api-reference/endpoint/get)

---

## Common Parameters

**Session-level:**
| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| `mode` | string | `"default"` | Session mode |
| `initialTask` | object | null | Initial task configuration |

**Task-level (inside `initialTask`):**
| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| `taskDetails` | string | `""` | Task description in natural language |
| `startingPoint` | string | null | Starting URL (skips navigation) |
| `maxDuration` | number | 300000 | Max task duration in ms (max: 5 min) |
| `maxInputTokens` | number | 100000 | AI model input token limit |
| `maxOutputTokens` | number | 100000 | AI model output token limit |
| `avoidDomains` | string[] | `[]` | Domains to block |
| `terminateOnCompletion` | boolean | false | Auto-terminate after task completes |
| `outputType` | string | `"text"` | Output format: `"text"` or `"structured"` |
| `outputSchema` | object | null | JSON Schema for structured output |

[All parameters](/api-reference/parameters)

---

## Error Handling

All errors follow this format:

```json
{
  "success": false,
  "message": "Human-readable error message"
}
```

**Common HTTP status codes:**

| Status | Meaning | Common Cause |
|--------|---------|--------------|
| 400 | Bad request | Missing required field (usually `taskDetails`) |
| 401 | Unauthorized | Invalid or missing API key |
| 402 | Payment required | Insufficient balance |
| 403 | Forbidden | Account deactivated |
| 404 | Not found | Session or task doesn't exist |
| 429 | Too many requests | Rate limit exceeded (wait and retry) |
| 503 | Service unavailable | No browser instances available (retry) |

**Common mistakes:**

- **Forgot to terminate?** Sessions cost money until terminated. Set `terminateOnCompletion: true` or call terminate explicitly.
- **Session ID not found?** Sessions expire after `maxDuration` of inactivity (default: 5 minutes). Check if the session expired due to inactivity.
- **Got a 401?** API key is invalid. Verify it's correct and hasn't been revoked.
- **Getting 429?** You're sending requests too fast. Rate limit is 10 req/min per endpoint.

[Complete error reference](/troubleshooting/errors-reference)

---

## Example Workflows

### Single Task

```javascript
const response = await fetch("https://connect.webrun.ai/start/run-task", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    "Authorization": "Bearer enig_xxxx"
  },
  body: JSON.stringify({
    taskDetails: "Search Google for Anthropic"
  })
});

const data = await response.json();

if (data.type === "task_completed") {
  console.log("Result:", data);
} else if (data.status === "pending") {
  // Poll for result
  const pollResponse = await fetch(data.pollUrl, {
    headers: { "Authorization": "Bearer enig_xxxx" }
  });
  const result = await pollResponse.json();
}
```

---

### Multi-Task Session

```javascript
// 1. Create session
const session = await fetch("https://connect.webrun.ai/start/start-session", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    "Authorization": "Bearer enig_xxxx"
  },
  body: JSON.stringify({
    mode: "default",
    initialTask: {
      taskDetails: "Go to amazon.com",
      startingPoint: "https://amazon.com"
    }
  })
}).then(r => r.json());

const sessionId = session.sessionId;

// 2. Send task
await fetch("https://connect.webrun.ai/start/send-message", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    "Authorization": "Bearer enig_xxxx"
  },
  body: JSON.stringify({
    sessionId,
    message: {
      actionType: "newTask",
      newState: "start",
      taskDetails: "Search for wireless keyboards"
    }
  })
});

// 3. Terminate
await fetch("https://connect.webrun.ai/start/send-message", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    "Authorization": "Bearer enig_xxxx"
  },
  body: JSON.stringify({
    sessionId,
    message: { actionType: "state", newState: "terminate" }
  })
});
```

---

## Next Steps

<CardGroup cols={2}>
  <Card title="Quickstart" icon="rocket" href="/getting-started/quickstart">
    Get started in 5 minutes
  </Card>
  <Card title="Complete Endpoint Docs" icon="code" href="/api-reference/endpoints">
    Detailed endpoint documentation
  </Card>
  <Card title="WebSocket Integration" icon="plug" href="/integrations/websocket">
    Real-time updates via WebSocket
  </Card>
  <Card title="Error Reference" icon="triangle-exclamation" href="/troubleshooting/errors-reference">
    Error handling guide
  </Card>
</CardGroup>
